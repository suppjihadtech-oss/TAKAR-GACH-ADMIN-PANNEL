<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>টাকার গাছ এডমিন V5.0 Original</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Hind+Siliguri:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* =========================================
           1. PREMIUM THEME CONFIGURATION
           ========================================= */
        :root {
            --primary: #10b981; 
            --primary-dark: #047857;
            --accent: #F59E0B;
            --bg-body: #F0F2F5;
            --text-main: #111827;
            --text-muted: #6B7280;
            --shadow-card: 0 4px 20px rgba(0,0,0,0.05);
            --radius-lg: 20px;
        }

        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; background: var(--bg-body); font-family: 'Poppins', 'Hind Siliguri', sans-serif; color: var(--text-main); padding-bottom: 90px; user-select: none; }

        /* --- SPLASH SCREEN --- */
        #splash-screen { position: fixed; inset: 0; background: var(--bg-body); z-index: 6000; display: flex; justify-content: center; align-items: center; flex-direction: column; }
        .growing-tree { font-size: 0px; color: var(--primary); margin-bottom: 20px; animation: growTree 2s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; transform-origin: bottom center; }
        @keyframes growTree { 0% { font-size: 0px; opacity: 0; transform: translateY(50px); } 100% { font-size: 90px; opacity: 1; transform: translateY(0); } }

        /* --- AUTHENTICATION --- */
        #auth-view { position: fixed; inset: 0; background: var(--bg-body); z-index: 5000; display: flex; justify-content: center; align-items: center; padding: 20px; }
        .login-box { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(20px); padding: 40px 30px; border-radius: 24px; width: 100%; max-width: 350px; text-align: center; border: 1px solid white; box-shadow: var(--shadow-card); }
        .inp { width: 100%; padding: 14px; margin-bottom: 15px; border: 1px solid #E5E7EB; border-radius: 12px; background: #F9FAFB; font-size: 15px; }
        .btn { width: 100%; padding: 14px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; border: none; border-radius: 12px; font-weight: 700; font-size: 16px; cursor: pointer; box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3); }

        /* --- DASHBOARD ELEMENTS --- */
        .header { position: sticky; top: 0; background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(10px); padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(0,0,0,0.05); z-index: 100; }
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; padding: 0 15px; }
        .stat-box { background: white; padding: 20px; border-radius: 18px; text-align: center; box-shadow: var(--shadow-card); border-bottom: 4px solid var(--primary); }
        .stat-box h1 { margin: 5px 0; font-size: 24px; }
        .stat-box p { margin: 0; font-size: 11px; color: var(--text-muted); font-weight: 700; text-transform: uppercase; }

        .menu-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; padding: 0 15px; margin-bottom: 20px; }
        .menu-btn { background: white; border: 1px solid #F3F4F6; border-radius: 16px; padding: 15px 5px; text-align: center; cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 90px; box-shadow: 0 2px 5px rgba(0,0,0,0.02); }
        .menu-btn i { font-size: 24px; margin-bottom: 8px; color: var(--text-main); }
        .menu-btn span { font-size: 10px; font-weight: 700; color: var(--text-muted); }

        /* --- LISTS & CARDS --- */
        .card { background: white; border-radius: 20px; padding: 20px; margin-bottom: 15px; box-shadow: var(--shadow-card); border: 1px solid #F3F4F6; }
        .list-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #F9FAFB; border-radius: 14px; margin-bottom: 10px; border: 1px solid #E5E7EB; }
        
        .badge { padding: 4px 10px; border-radius: 20px; font-size: 10px; font-weight: 700; text-transform: uppercase; }
        .badge-vip { background: #FEF3C7; color: #D97706; }
        .badge-success { background: #D1FAE5; color: #059669; }
        .badge-reject { background: #FEE2E2; color: #DC2626; }

        /* --- BOTTOM NAV --- */
        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; background: rgba(255,255,255,0.95); border-top: 1px solid #E5E7EB; padding: 12px 15px; display: flex; justify-content: space-around; z-index: 1000; backdrop-filter: blur(10px); border-radius: 25px 25px 0 0; }
        .nav-item { text-align: center; color: var(--text-muted); cursor: pointer; position: relative; }
        .nav-item.active { color: var(--primary); transform: translateY(-5px); }
        .nav-badge { position: absolute; top: -8px; right: -5px; background: #EF4444; color: white; font-size: 10px; padding: 2px 6px; border-radius: 10px; font-weight: bold; border: 2px solid white; }

        /* --- MODALS --- */
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); z-index: 2000; display: none; justify-content: center; align-items: center; padding: 20px; }
        .modal-box { background: white; width: 100%; max-width: 400px; padding: 25px; border-radius: 24px; box-shadow: 0 20px 50px rgba(0,0,0,0.2); max-height: 85vh; overflow-y: auto; }
        .btn-sm { padding: 6px 12px; border-radius: 8px; font-size: 12px; border: none; color: white; cursor: pointer; font-weight: 600; }

        /* SWITCH TOGGLE */
        .switch { position: relative; display: inline-block; width: 50px; height: 26px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--primary); }
        input:checked + .slider:before { transform: translateX(24px); }
        .switch-red input:checked + .slider { background-color: #EF4444; }
    </style>
</head>
<body>

    <div id="splash-screen"><i class="fas fa-tree growing-tree"></i><h1 style="color:var(--text-main);font-weight:800;margin:0">টাকার গাছ</h1><small style="color:var(--text-muted)">ADMIN PANEL V5.0</small></div>

    <div id="auth-view" style="display:none"><div class="login-box"><i class="fas fa-user-shield" style="font-size:50px;color:var(--primary);margin-bottom:20px"></i><h2>অ্যাডমিন লগইন</h2><input id="u" class="inp" placeholder="ইউজারনেম"><input id="p" type="password" class="inp" placeholder="পাসওয়ার্ড"><button class="btn" onclick="login()">প্রবেশ করুন</button></div></div>

    <div id="dashboard" style="display:none">
        <div class="header"><h2><i class="fas fa-tree" style="color:var(--primary)"></i> অ্যাডমিন প্যানেল</h2><div onclick="location.reload()" style="background:#F3F4F6;padding:8px;border-radius:50%;cursor:pointer"><i class="fas fa-sync-alt" style="color:var(--primary)"></i></div></div>

        <div id="home-view" class="content-area active" style="padding-top:20px">
            <div class="stat-grid">
                <div class="stat-box"><h1 id="total-u">0</h1><p>মোট ইউজার</p></div>
                <div class="stat-box" style="border-color:#3b82f6"><h1 id="total-b">৳0</h1><p>মোট ব্যালেন্স</p></div>
                <div class="stat-box" style="border-color:#10b981"><h1 id="total-dep" style="color:#10b981">৳0</h1><p>ডিপোজিট</p></div>
                <div class="stat-box" style="border-color:#ef4444"><h1 id="total-wd" style="color:#ef4444">৳0</h1><p>উইথড্র</p></div>
            </div>
            
            <div style="background:linear-gradient(135deg,#1F2937,#111827);padding:20px;border-radius:24px;text-align:center;color:white;margin:0 15px 25px;box-shadow:0 10px 20px rgba(0,0,0,0.1)"><small style="opacity:0.7;text-transform:uppercase;letter-spacing:1px">নিট প্রফিট (Net Profit)</small><h1 id="net-profit" style="margin:5px 0;font-size:32px">৳0</h1></div>

            <div class="menu-grid">
                <div class="menu-btn" onclick="nav('users')"><i class="fas fa-users" style="color:#3b82f6"></i><span>ইউজার</span></div>
                <div class="menu-btn" onclick="nav('plans')"><i class="fas fa-crown" style="color:#F59E0B"></i><span>VIP প্ল্যান</span></div>
                <div class="menu-btn" onclick="nav('deposits')"><i class="fas fa-arrow-down" style="color:#10b981"></i><span>ডিপোজিট</span></div>
                <div class="menu-btn" onclick="nav('withdraws')"><i class="fas fa-arrow-up" style="color:#ef4444"></i><span>উইথড্র</span></div>
                <div class="menu-btn" onclick="nav('tasks')"><i class="fas fa-tasks" style="color:#8B5CF6"></i><span>টাস্ক</span></div>
                <div class="menu-btn" onclick="nav('job_reqs')"><i class="fas fa-briefcase" style="color:#EC4899"></i><span>জব এপ্রুভাল</span></div>
                <div class="menu-btn" onclick="nav('history')"><i class="fas fa-history" style="color:#6B7280"></i><span>হিস্টরি</span></div>
                <div class="menu-btn" onclick="nav('settings')"><i class="fas fa-cogs" style="color:#1F2937"></i><span>সেটিংস</span></div>
            </div>

            <div class="card" style="margin:0 15px"><h3>সাম্প্রতিক ইউজার</h3><div id="recent-list"></div></div>
            <div style="padding:0 15px;margin-top:20px"><button class="btn" style="background:#EF4444" onclick="logout()">লগ আউট</button></div>
        </div>

        <div id="dynamic-view" class="content-area" style="display:none;padding:20px">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px"><h3 id="page-title" style="margin:0;color:var(--text-main);font-weight:800">...</h3><button class="btn-sm" style="background:#374151" onclick="goHome()">ব্যাক</button></div>
            <div id="page-content"></div>
        </div>

        <div class="bottom-nav">
            <div class="nav-item active" onclick="goHome()"><i class="fas fa-home"></i><br><span>হোম</span></div>
            <div class="nav-item" onclick="nav('users')"><i class="fas fa-users"></i><br><span>ইউজার</span></div>
            <div class="nav-item" onclick="nav('job_reqs')"><i class="fas fa-check-circle"></i><br><span>জব</span><span id="nav-badge" class="nav-badge" style="display:none">0</span></div>
            <div class="nav-item" onclick="nav('settings')"><i class="fas fa-cog"></i><br><span>সেটিংস</span></div>
        </div>
    </div>

    <div id="user-modal" class="modal"><div class="modal-box"><h3>এডিট ইউজার</h3><input type="hidden" id="e-uid"><label style="font-size:12px;color:#666">ব্যালেন্স</label><input id="e-bal" type="number" class="inp"><label style="font-size:12px;color:#666">পাসওয়ার্ড</label><input id="e-pass" class="inp"><div style="display:flex;gap:10px;margin-top:15px"><button class="btn" style="background:#EF4444" onclick="doBan()" id="ban-btn">ব্যান</button><button class="btn" onclick="saveUser()">সেভ করুন</button></div><button onclick="closeModal('user-modal')" style="background:transparent;border:none;color:#999;width:100%;margin-top:15px;cursor:pointer">বন্ধ করুন</button></div></div>
    
    <div id="plan-modal" class="modal"><div class="modal-box"><h3>নতুন প্ল্যান</h3><input id="p-name" class="inp" placeholder="নাম"><input id="p-price" type="number" class="inp" placeholder="দাম"><input id="p-inc" type="number" class="inp" placeholder="দৈনিক ইনকাম"><input id="p-val" type="number" class="inp" placeholder="মেয়াদ (দিন)"><button class="btn" onclick="savePlan()">তৈরি করুন</button><button onclick="closeModal('plan-modal')" style="background:transparent;border:none;color:#999;width:100%;margin-top:15px;cursor:pointer">বন্ধ করুন</button></div></div>
    
    <div id="detail-modal" class="modal"><div class="modal-box"><h3 style="text-align:center">বিস্তারিত তথ্য</h3><div id="rec-content" style="font-size:14px;line-height:1.6;color:#4B5563;background:#F9FAFB;padding:15px;border-radius:15px;border:1px solid #EEE"></div><button onclick="closeModal('detail-modal')" class="btn" style="margin-top:20px">ঠিক আছে</button></div></div>

    <script>
        // CONFIGURATION (আগের চ্যাটে দেওয়া একই কনফিগ)
        const firebaseConfig = { 
            apiKey: "AIzaSyDgI-d8iwWr40tmknbY6jhH0oRb2Tvg4d0", 
            authDomain: "takar-gach-a1d84.firebaseapp.com", 
            databaseURL: "https://takar-gach-a1d84-default-rtdb.firebaseio.com", 
            projectId: "takar-gach-a1d84", 
            storageBucket: "takar-gach-a1d84.firebasestorage.app", 
            messagingSenderId: "637802367074", 
            appId: "1:637802367074:web:2e7f6c0670ec47f3a1693b" 
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let USERS = {}, HISTORY = {}, SETTINGS = {};

        // 1. AUTH LOGIC
        function login() {
            const u = document.getElementById('u').value;
            const p = document.getElementById('p').value;
            if(u === "admin" && p === "123456") { // আপনার পছন্দের পাসওয়ার্ড দিন
                sessionStorage.setItem('admin_log', 'true');
                document.getElementById('auth-view').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                initAdmin();
            } else {
                Swal.fire('ভুল পাসওয়ার্ড', 'সঠিক তথ্য দিন!', 'error');
            }
        }

        window.onload = () => {
            setTimeout(() => {
                document.getElementById('splash-screen').style.display = 'none';
                if(sessionStorage.getItem('admin_log')) {
                    document.getElementById('dashboard').style.display = 'block';
                    initAdmin();
                } else {
                    document.getElementById('auth-view').style.display = 'flex';
                }
            }, 2000);
        };

        // 2. INITIALIZATION & STATS
        function initAdmin() {
            db.ref('users').on('value', snap => {
                USERS = snap.val() || {};
                renderStats();
                if(document.getElementById('home-view').classList.contains('active')) renderRecentUsers();
            });

            db.ref('settings').on('value', snap => {
                SETTINGS = snap.val() || {};
            });
        }

        function renderStats() {
            let totalBal = 0, totalDep = 0, totalWd = 0, userCount = 0;
            
            Object.values(USERS).forEach(u => {
                userCount++;
                totalBal += (u.balance || 0);
                if(u.history) {
                    Object.values(u.history).forEach(h => {
                        if(h.status === "Success") {
                            if(h.type.includes('Buy')) totalDep += (h.amount || 0);
                            if(h.type === 'Withdraw') totalWd += (h.amount || 0);
                        }
                    });
                }
            });

            document.getElementById('total-u').innerText = userCount;
            document.getElementById('total-b').innerText = '৳' + totalBal;
            document.getElementById('total-dep').innerText = '৳' + totalDep;
            document.getElementById('total-wd').innerText = '৳' + totalWd;
            document.getElementById('net-profit').innerText = '৳' + (totalDep - totalWd);
        }

        // 3. NAVIGATION
        function nav(page) {
            document.getElementById('home-view').style.display = 'none';
            document.getElementById('home-view').classList.remove('active');
            document.getElementById('dynamic-view').style.display = 'block';
            document.getElementById('dynamic-view').classList.add('active');
            
            const content = document.getElementById('page-content');
            const title = document.getElementById('page-title');
            content.innerHTML = '<p style="text-align:center">লোড হচ্ছে...</p>';

            if(page === 'users') {
                title.innerText = "ইউজার লিস্ট";
                renderUserList();
            } else if(page === 'deposits') {
                title.innerText = "ডিপোজিট রিকোয়েস্ট";
                renderRequests('Buy');
            } else if(page === 'withdraws') {
                title.innerText = "উইথড্র রিকোয়েস্ট";
                renderRequests('Withdraw');
            } else if(page === 'job_reqs') {
                title.innerText = "জব ভেরিফিকেশন";
                renderRequests('Task Reward');
            } else if(page === 'settings') {
                title.innerText = "অ্যাপ সেটিংস";
                renderSettings();
            }
        }

        function goHome() {
            document.getElementById('dynamic-view').style.display = 'none';
            document.getElementById('dynamic-view').classList.remove('active');
            document.getElementById('home-view').style.display = 'block';
            document.getElementById('home-view').classList.add('active');
            renderRecentUsers();
        }

        // 4. USER MANAGEMENT
        function renderUserList() {
            let html = '<input type="text" class="inp" placeholder="নাম বা নাম্বার দিয়ে খুঁজুন..." onkeyup="searchUser(this.value)">';
            html += '<div id="user-items-container">';
            Object.values(USERS).reverse().forEach(u => {
                html += `
                <div class="list-item user-row" data-search="${u.name} ${u.phone}">
                    <div><b>${u.name}</b><br><small>${u.phone}</small></div>
                    <div style="text-align:right">
                        <b>৳${u.balance}</b><br>
                        <button class="btn-sm" style="background:var(--primary)" onclick="editUser('${u.phone}')">ম্যানেজ</button>
                    </div>
                </div>`;
            });
            html += '</div>';
            document.getElementById('page-content').innerHTML = html;
        }

        function editUser(phone) {
            const u = USERS[phone];
            document.getElementById('e-uid').value = phone;
            document.getElementById('e-bal').value = u.balance;
            document.getElementById('e-pass').value = u.pass;
            const banBtn = document.getElementById('ban-btn');
            banBtn.innerText = u.banned ? "আনব্যান" : "ব্যান করুন";
            banBtn.style.background = u.banned ? "#10b981" : "#ef4444";
            openModal('user-modal');
        }

        function saveUser() {
            const phone = document.getElementById('e-uid').value;
            const newBal = parseFloat(document.getElementById('e-bal').value);
            const newPass = document.getElementById('e-pass').value;
            db.ref('users/' + phone).update({ balance: newBal, pass: newPass });
            closeModal('user-modal');
            Swal.fire('সফল', 'ইউজার তথ্য আপডেট হয়েছে।', 'success');
        }

        function doBan() {
            const phone = document.getElementById('e-uid').value;
            const isBanned = USERS[phone].banned || false;
            db.ref('users/' + phone).update({ banned: !isBanned });
            closeModal('user-modal');
            Swal.fire('সফল', isBanned ? 'আনব্যান করা হয়েছে' : 'ব্যান করা হয়েছে', 'success');
        }

        // 5. REQUESTS (DEPOSIT / WITHDRAW / TASKS)
        function renderRequests(type) {
            let html = '';
            let count = 0;
            Object.keys(USERS).forEach(uId => {
                const hist = USERS[uId].history;
                if(hist) {
                    Object.keys(hist).forEach(hId => {
                        const h = hist[hId];
                        if(h.type.includes(type) && h.status === "Pending") {
                            count++;
                            html += `
                            <div class="card">
                                <div style="display:flex; justify-content:space-between">
                                    <span><b>${USERS[uId].name}</b></span>
                                    <span class="badge badge-vip">${h.type}</span>
                                </div>
                                <div style="margin:10px 0; font-size:13px">
                                    পরিমাণ: <b>৳${h.amount}</b><br>
                                    তারিখ: ${h.date}<br>
                                    মেথড: ${h.method || 'N/A'} | Trx: ${h.trx || 'N/A'}
                                    ${h.proof ? `<br>প্রুফ: <span style="color:blue">${h.proof}</span>` : ''}
                                </div>
                                <div style="display:flex; gap:10px">
                                    <button class="btn-sm" style="background:#10b981; flex:1" onclick="approveReq('${uId}', '${hId}', ${h.amount}, '${h.type}', ${h.validity||0}, '${h.method}')">এপ্রুভ</button>
                                    <button class="btn-sm" style="background:#ef4444; flex:1" onclick="rejectReq('${uId}', '${hId}')">রিজেক্ট</button>
                                </div>
                            </div>`;
                        }
                    });
                }
            });
            document.getElementById('page-content').innerHTML = html || '<p style="text-align:center; padding:50px">কোনো রিকোয়েস্ট নেই।</p>';
        }

        function approveReq(uId, hId, amount, type, validity, method) {
            Swal.fire({
                title: 'নিশ্চিত?',
                text: "আপনি কি এই রিকোয়েস্টটি এপ্রুভ করতে চান?",
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'হ্যাঁ'
            }).then((res) => {
                if(res.isConfirmed) {
                    const updateData = {};
                    updateData[`users/${uId}/history/${hId}/status`] = "Success";
                    
                    if(type.includes('Buy')) { // VIP Purchase
                        updateData[`users/${uId}/isVip`] = true;
                        updateData[`users/${uId}/currentPlan`] = type.replace('Buy ', '');
                        updateData[`users/${uId}/vipExpire`] = Date.now() + (validity * 86400000);
                    } else if(type === 'Withdraw') { // Withdraw
                        // ব্যালেন্স আগেই উইথড্রর সময় কাটা হয়, তাই এখানে শুধু স্ট্যাটাস আপডেট
                    } else if(type === 'Task Reward') { // Task Approval
                        const currentBal = USERS[uId].balance || 0;
                        updateData[`users/${uId}/balance`] = currentBal + amount;
                    }

                    db.ref().update(updateData);
                    Swal.fire('এপ্রুভড!', 'রিকোয়েস্টটি সফলভাবে এপ্রুভ হয়েছে।', 'success');
                    nav(type === 'Withdraw' ? 'withdraws' : (type === 'Task Reward' ? 'job_reqs' : 'deposits'));
                }
            });
        }

        function rejectReq(uId, hId) {
            Swal.fire({
                title: 'রিজেক্ট করার কারণ',
                input: 'text',
                inputPlaceholder: 'যেমন: ভুল TrxID বা ভুল নাম্বার',
                showCancelButton: true,
                confirmButtonText: 'রিজেক্ট করুন'
            }).then((res) => {
                if(res.value) {
                    db.ref(`users/${uId}/history/${hId}`).update({
                        status: "Rejected",
                        reason: res.value
                    });
                    Swal.fire('রিজেক্টেড!', 'ইউজার কারণটি দেখতে পাবে।', 'error');
                    location.reload();
                }
            });
        }

        // 6. SETTINGS MANAGEMENT
        function renderSettings() {
            const s = SETTINGS;
            document.getElementById('page-content').innerHTML = `
                <div class="card">
                    <label>নোটিশ (Notice)</label>
                    <textarea id="set-notice" class="inp" style="height:80px">${s.notice || ''}</textarea>
                    
                    <label>বিকাশ নাম্বার (Bkash)</label>
                    <input id="set-bkash" class="inp" value="${s.bkash || ''}">
                    
                    <label>নগদ নাম্বার (Nagad)</label>
                    <input id="set-nagad" class="inp" value="${s.nagad || ''}">

                    <div style="display:flex; justify-content:space-between; align-items:center; margin:15px 0">
                        <span>অফিস টাইম (Maintenance)</span>
                        <label class="switch switch-red">
                            <input type="checkbox" id="set-maint" ${s.maintenance ? 'checked' : ''}>
                            <span class="slider"></span>
                        </label>
                    </div>

                    <button class="btn" onclick="saveSettings()">সেটিংস সেভ করুন</button>
                </div>
            `;
        }

        function saveSettings() {
            const data = {
                notice: document.getElementById('set-notice').value,
                bkash: document.getElementById('set-bkash').value,
                nagad: document.getElementById('set-nagad').value,
                maintenance: document.getElementById('set-maint').checked
            };
            db.ref('settings').update(data);
            Swal.fire('সফল', 'সেটিংস আপডেট হয়েছে।', 'success');
        }

        // HELPERS
        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }
        function logout() { sessionStorage.clear(); location.reload(); }
        function searchUser(val) {
            const filter = val.toLowerCase();
            document.querySelectorAll('.user-row').forEach(row => {
                row.style.display = row.getAttribute('data-search').toLowerCase().includes(filter) ? 'flex' : 'none';
            });
        }
    </script>
</body>
</html>
